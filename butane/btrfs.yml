variant: fcos
version: 1.6.0
storage:
  directories:
    - path: /var/srv/fast

systemd:
  units:
    - name: mnt-fast.mount
      enabled: false
      contents: |
        [Unit]
        Description=Detect SSDs and mount if present
        ConditionPathExists=/dev/disk/by-label/fast

        [Mount]
        What=/dev/disk/by-label/fast
        Where=/var/srv/fast
        Type=btrfs
        Options=nofail,subvol=/
    - name: mnt-fast.automount
      enabled: true
      contents: |
        [Unit]
        Description=Automount SSDs (on demand)

        [Automount]
        Where=/var/srv/fast
        TimeoutIdleSec=2min

        [Install]
        WantedBy=multi-user.target

    - name: var-music.mount
      enabled: false
      contents: |
        [Unit]
        Description=Mount /var/music from fast:@music
        ConditionPathExists=/dev/disk/by-label/fast

        [Mount]
        What=/dev/disk/by-label/fast
        Where=/var/music
        Type=btrfs
        Options=nofail,subvol=@music
    - name: var-music.automount
      enabled: true
      contents: |
        [Unit]
        Description=Automount music (on first access)

        [Automount]
        Where=/var/music
        TimeoutIdleSec=2min

        [Install]
        WantedBy=multi-user.target

    - name: var-music-touhou.mount
      enabled: false
      contents: |
        [Unit]
        Description=Mount /var/music/touhou from fast:@touhou
        ConditionPathExists=/dev/disk/by-label/fast

        [Mount]
        What=/dev/disk/by-label/fast
        Where=/var/music/touhou
        Type=btrfs
        Options=nofail,subvol=@touhou
    - name: var-music-touhou.automount
      enabled: true
      contents: |
        [Unit]
        Description=Automount TouHou (on first access)

        [Automount]
        Where=/var/music/touhou
        TimeoutIdleSec=2min

        [Install]
        WantedBy=multi-user.target

    - name: var-apps.mount
      enabled: false
      contents: |
        [Unit]
        Description=Mount /var/apps from fast:@apps
        ConditionPathExists=/dev/disk/by-label/fast

        [Mount]
        What=/dev/disk/by-label/fast
        Where=/var/apps
        Type=btrfs
        Options=nofail,subvol=@apps
    - name: var-apps.automount
      enabled: true
      contents: |
        [Unit]
        Description=Automount apps (on first access)

        [Automount]
        Where=/var/apps
        TimeoutIdleSec=2min

        [Install]
        WantedBy=multi-user.target

    - name: var-git.mount
      enabled: false
      contents: |
        [Unit]
        Description=Mount /var/git from fast:@git
        ConditionPathExists=/dev/disk/by-label/fast

        [Mount]
        What=/dev/disk/by-label/fast
        Where=/var/git
        Type=btrfs
        Options=nofail,subvol=@git
    - name: var-git.automount
      enabled: true
      contents: |
        [Unit]
        Description=Automount git (on first access)

        [Automount]
        Where=/var/git
        TimeoutIdleSec=2min

        [Install]
        WantedBy=multi-user.target