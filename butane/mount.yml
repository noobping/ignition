variant: fcos
version: 1.6.0

storage:
  files:
    - path: /usr/local/bin/mount-fast-subvols.sh
      mode: 0755
      contents:
        local: scripts/mount-fast.sh

systemd:
  units:
    - name: mount-fast-subvols.service
      enabled: false
      contents: |
        [Unit]
        Description=Mount Btrfs subvolumes from /dev/disk/by-label/fast
        Wants=local-fs.target
        Before=local-fs.target
        ConditionPathExists=/dev/disk/by-label/fast

        [Service]
        Type=oneshot
        ExecStart=/usr/local/bin/mount-fast-subvols.sh
        RemainAfterExit=yes

        [Install]
        WantedBy=local-fs.target