variant: fcos
version: 1.6.0

storage:
  raid:
    - name: cold
      level: raid6
      devices:
        - /dev/sda1
        - /dev/sda2
        - /dev/sda3
        - /dev/sda4
        - /dev/sda5
      options: [ "--metadata=1.2" ]

    - name: hot
      level: raid0
      devices:
        - /dev/nvme0n2
        - /dev/nvme0n3
        - /dev/nvme0n4
      options: [ "--metadata=1.2" ]

  luks:
    - name: cold_crypt
      device: /dev/md/cold
      wipe_volume: true
      clevis:
        tpm2: true
    - name: hot_crypt
      device: /dev/md/hot
      wipe_volume: true
      clevis:
        tpm2: true

  filesystems:
    - device: /dev/mapper/cold_crypt
      path: /var/srv/cold
      format: btrfs
      mount_options:
        - compress=zstd
        - noatime
      with_mount_unit: true
    - device: /dev/mapper/hot_crypt
      path: /var/srv/hot
      format: btrfs
      mount_options:
        - compress=zstd
        - noatime
      with_mount_unit: true
